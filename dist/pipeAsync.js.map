{"version":3,"file":"pipeAsync.js","sources":["../src/pipeAsync.js"],"sourcesContent":["import { is } from '#utils/is.js';\n\n/**\n * Performs left-to-right function composition. The leftmost function may have\n * any arity; the remaining functions must be unary. If any function returns a\n * promise, it chains remaining ones\n *\n * @func\n * @async\n * @category Function\n * @param {...Function} functions\n * @return {Function} a function that represents the composition of the arguments\n * @see composeAsync\n * @example\n * var head = ([h]) => h;\n * var process = (a) => Promise.resolve(a);\n * var promiseAll = Promise.all.bind(Promise);\n *\n * var f = pipeAsync(process, promiseAll, head);\n *\n * f([1, 2]); // Promise.all([process(1), process(2)])[0] => 1\n *\n * @preserve true\n */\nexport function pipeAsync(...functions) {\n  if (arguments.length === 0) {\n    throw new Error('pipeAsync requires at least one argument');\n  }\n\n  return async function (value) {\n    let _value = value;\n\n    for (const fn of functions) {\n      _value = fn.call(this, _value);\n\n      if (is.promise(_value)) {\n        _value = await _value;\n      }\n    }\n\n    return _value;\n  };\n}\n"],"names":[],"mappings":";;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAsBO,SAAS,aAAa,WAAW;AACtC,MAAI,UAAU,WAAW,GAAG;AAC1B,UAAM,IAAI,MAAM,0CAA0C;AAAA,EAC3D;AAED,SAAO,eAAgB,OAAO;AAC5B,QAAI,SAAS;AAEb,eAAW,MAAM,WAAW;AAC1B,eAAS,GAAG,KAAK,MAAM,MAAM;AAE7B,UAAI,GAAG,QAAQ,MAAM,GAAG;AACtB,iBAAS,MAAM;AAAA,MAChB;AAAA,IACF;AAED,WAAO;AAAA,EACX;AACA;"}